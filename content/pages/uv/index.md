Title: uv - THE extremely fast Python package installer and resolver !
Date: 2025-02-03
Status: published
Tags: uv, python, venv, rust, pelican, site

Did any of you Pythonista folks use any python project without using a virtual-environment, then installing (and maintinaing) versions of your external library :) ?
I do not ... and I always found installing (downloading) new libraries slow.

This article will show you how to use [uv](https://docs.astral.sh/uv/) to make this very very fast and very easy ... and the learning curve is inexistant.

# Goal.
Create a python project using [uv](https://docs.astral.sh/uv/), add dependencies and test that dependencies are installed.

The toy project will be a static site generated using [Pelican](https://getpelican.com/) which is a static site generator powered by Python!

# Install uv.
The compelete installation methis can be found at [here](https://docs.astral.sh/uv/getting-started/installation/)
```bash
brew install uv
```

# Create a project.
```bash
uv init project
cd project
```

# Install Dependencies.
We will install dependecies needed to create, build, generate a site maintained by [Pelican](https://getpelican.com/).
```bash
uv add "pelican[markdown]==4.10.2" "invoke==2.2.0" "livereload==2.7.1" 
```

uv will create automatically:

1. Python virtual enviroment under ".venv" folder.
1. Pyhton configuration file aka "pyproject.toml"
1. Download and install dependencies (and dependencies of dependencies) and update "pyroject.toml" for you.


# Test that depencies are properly installed.
```bash
uv run python -c "import pelican; print(pelican.__version__)" 
>> 4.10.2
```

# Run live reload of the site.
we will use one liner instad of activating a virtual-env then running `invoke`

```bash
# Prefered: one liner option
uv run invoke livereload

# Cumbersome: multi line that works as well :)
source .venv/bin/activate
invoke livereload
```

# Bonus section - the old way (virtual-env and pip) but faster !

In this section we will see how to use uv to generate list of dependencies and installing this the old way.
Create a `requirements.in` with the direct dependencies that you need.
```bash
cat requirements.in

pelican[markdown]==4.10.2
invoke==2.2.0
livereload==2.7.1
```

```bash
# Create a virual environme
uv venv .venv

# Activate virtual environment
source .venv/bin/activate
```

```bash
# compile all the dependencies and dependencies of dependencies ... 
uv pip compile requirements.in -o requirements.txt
```
```bash

cat requirements.txt

----
This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in -o requirements.txt
anyio==4.7.0
    # via watchfiles
blinker==1.9.0
...
----
```

# Installing dependencies

```bash
# We will stiff use uv to download and instal libraries.
uv pip install -r requirements.txt
```
