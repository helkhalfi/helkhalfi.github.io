(function($){$.fn.tipuesearch=function(options){var set=$.extend({'contextBuffer':60,'contextLength':60,'contextStart':90,'debug':false,'descriptiveWords':25,'footerPages':3,'highlightTerms':true,'imageZoom':true,'minimumLength':3,'newWindow':false,'show':10,'showContext':true,'showRelated':true,'showTime':true,'showTitleCount':true,'showURL':false,'wholeWords':true},options);return this.each(function(){var tipuesearch_t_c=0;var tipue_search_w='';if(set.newWindow) {tipue_search_w=' target="_blank"';} function getURLP(name) {var locSearch=location.search;var splitted=(new RegExp('[?|&]'+name+'='+'([^&;]+?)(&|#|;|$)').exec(locSearch)||[,""]);var searchString=splitted[1].replace(/\+/g,'%20');try {searchString=decodeURIComponent(searchString);} catch(e) {searchString=unescape(searchString);} return searchString||null;} if(getURLP('q')) {$('#tipue_search_input').val(getURLP('q'));getTipueSearch(0,true);} $(this).keyup(function(event) {if(event.keyCode=='13') {getTipueSearch(0,true);}});function getTipueSearch(start,replace) {window.scrollTo(0,0);var out='';var show_replace=false;var show_stop=false;var standard=true;var c=0;var found=[];var d_o=$('#tipue_search_input').val();d_o=d_o.replace(/\+/g,' ').replace(/\s\s+/g,' ');d_o=$.trim(d_o);var d=d_o.toLowerCase();if((d.match("^\"")&&d.match("\"$"))||(d.match("^'")&&d.match("'$"))) {standard=false;} var d_w=d.split(' ');if(standard) {d='';for(var i=0;i<d ');} '+d_w[i];}} _w.length;i++) a_w=true;for(var d=$.trim(d);d_w=d.split(' else f=0;f<tipuesearch_stop_words.length;f++) if(a_w) if(d.length {a_w=false;show_stop=true;}} {d=d.substring(1,d.length-1);} {if(d_w[i]==tipuesearch_stop_words[f]) {var>=set.minimumLength) {if(standard) {if(replace) {var d_r=d;for(var i=0;i<d {out+='<div id="tipue_search_results_count">' ');for(var ');} '+tipuesearch_stem.words[f].stem;}}} '+title;tipuesearch_t_c++;} +tipuesearch_string_4;} _w.length;i++) c_c=c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");out+='<div d_t=d;for(var d_w=d_t.split(' e=0;e<tipuesearch_weight.weight.length;e++) else f=0;f<d_w.length;f++) i=0;i<tipuesearch.pages.length;i++) id=tipue_search_results_count if(c==1) if(c!=0) if(d_w[f].match('^-')) if(score!=0) if(tipuesearch.pages[i].tags) if(tipuesearch.pages[i].text.search(pat)!=-1) if(tipuesearch.pages[i].title.search(pat)!=-1) if(tipuesearch.pages[i].url.search(pat)!=-1) m_c=tipuesearch.pages[i].tags.match(pat).length;score+=(10*m_c);}} pat=new regexp('\\b'+d_w[f]+'\\b','gi');} regexp(d,'gi');if(tipuesearch.pages[i].title.search(pat)!=-1) regexp(d_w[f],'gi');} regexp(d_w[f].substring(1),'i');if(tipuesearch.pages[i].title.search(pat)!=-1||tipuesearch.pages[i].text.search(pat)!=-1||tipuesearch.pages[i].tags.search(pat)!=-1) s_t=tipuesearch.pages[i].text;var score=0;var title=document.title;document.title='('+c+') var {d=d.replace(d_w[i],tipuesearch_replace.words[f].replace_with);show_replace=true;}}} {d_t=d_t+' {for(var {found.push({"score":score,"title":tipuesearch.pages[i].title,"desc":s_t,"img":tipuesearch.pages[i].img,"url":tipuesearch.pages[i].url,"note":tipuesearch.pages[i].note});c++;}}} {if(d_w[i]==tipuesearch_stem.words[f].word) {if(set.showtitlecount&&tipuesearch_t_c==0) {if(set.wholewords) {if(tipuesearch.pages[i].tags.search(pat)!=-1) {if(tipuesearch.pages[i].url==tipuesearch_weight.weight[e].url) {pat=new {score=0;}}} {score+=tipuesearch_weight.weight[e].score;}}} {var>'+c_c+' '+tipuesearch_string_5;} if(set.showTime) {var endTimer=new Date().getTime();var time=(endTimer-startTimer)/ 1000;out+=' ('+time.toFixed(2)+' '+tipuesearch_string_14+')';set.showTime=false;} out+='';if(set.showRelated&&standard) {var ront='';f=0;for(var i=0;i<tipuesearch ront+='<a class="tipue_search_related_btn" id="' {out+='<div class="tipue_search_related">' '+tipuesearch_related.related[i].related;} ';} +r_d+'" +tipuesearch_string_10+': _related.related.length;i++) else if(show_replace) if(tipuesearch_related.related[i].include) r_d=tipuesearch_related.Related[i].related;} {d_o=d;} {if(!f) {if(d==tipuesearch_related.Related[i].search) {var>'+tipuesearch_related.Related[i].related+', ';f++;}} if(f) {ront=ront.slice(0,-2);ront+='.';out+=ront;}} if(show_replace) {out+='<div id=tipue_search_replace>'+tipuesearch_string_2+' '+d+'. '+tipuesearch_string_3+' <a id=tipue_search_replaced>'+d_r+'</a></div>';} found.sort(function(a,b){return b.score-a.score});var l_o=0;if(set.imageZoom) {out+='<div id=tipue_search_image_modal><div class=tipue_search_image_close>✕</div><div class=tipue_search_image_block><a id=tipue_search_zoom_url><img id=tipue_search_zoom_img></a><div id=tipue_search_zoom_text></div></div></div>';} for(var i=0;i<found .length;i++) {if(l_o>=start&&l_o<set ;out+='<h2><a href="' {out+='<div class="tipue_search_result">' +found[i].url+'"'+tipue_search_w+' .show+start)>'+found[i].title+'';if(set.debug) {out+='<div class=tipue_search_content_debug>Score: '+found[i].score+'</div>';} if(set.showURL) {var s_u=found[i].url.toLowerCase();if(s_u.indexOf('http://')==0) {s_u=s_u.slice(7);} out+='<div class=tipue_search_content_url><a href="'+found[i].url+'" '+tipue_search_w+'>'+s_u+'</a></div>';} if(found[i].img) {if(set.imageZoom) {out+='<div class=tipue_search_image><img alt="'+found[i].title+'" class="tipue_search_img tipue_search_image_zoom" data-url="'+found[i].url+'" src="'+found[i].img+'"></div>';} else {out+='<div class=tipue_search_image><a href="'+found[i].url+'" '+tipue_search_w+'><img alt="'+found[i].title+'" src="'+found[i].img+'" class=tipue_search_img></a></div>';}} if(found[i].desc) {var t=found[i].desc;if(set.showContext) {d_w=d.split(' ');var s_1=found[i].desc.toLowerCase().indexOf(d_w[0]);if(s_1>set.contextStart) {var t_1=t.substr(s_1-set.contextBuffer);var s_2=t_1.indexOf(' ');t_1=t.substr(s_1-set.contextBuffer+s_2);t_1=$.trim(t_1);if(t_1.length>set.contextLength) {t='... '+t_1;}}} if(standard) {d_w=d.split(' ');for(var f=0;f<d _w.length;f++) patr=new regexp('('+d_w[f]+')','gi');t=t.replace(patr,"<h0011 {if(set.highlightterms) {var>$1<h0012>");}}} else if(set.highlightTerms) {var patr=new RegExp('('+d+')','gi');t=t.replace(patr,"<span class=\"tipue_search_content_bold\">$1</span>");} var t_d='';var t_w=t.split(' ');if(t_w.length<set {t_d+=" ..." ';}} .descriptivewords) ;} class=\"tipue_search_content_bold\"');t_d=t_d.replace(/h0012/g,'/span');out+='<p else f=0;f<set.descriptiveWords;f++) t_d=t_d.replace(/h0011/g,'span {for(var {t_d=t;}>'+t_d+'';} if(found[i].note) {out+='<div class=tipue_search_note>'+found[i].note+'</div>';} out+='';} l_o++;} if(c>set.show) {var pages=Math.ceil(c / set.show);var page=(start / set.show);if(set.footerPages<3 out+='<div id="tipue_search_foot"><ul id="tipue_search_foot_boxes">' ) ;if(start {set.footerpages=3;}>0) {out+='<li role=navigation><a id="'+(start-set.show)+'_'+replace+'" accesskey=b class=tipue_search_foot_box>'+tipuesearch_string_6+'</a></li>';} if(page<=2) {var p_b=pages;if(pages>set.footerPages) {p_b=set.footerPages;} for(var f=0;f<p {out+='<li class="current" role="navigation">' +(f+1)+'< _b;f++) li {if(f==page)>';} else {out+='<li role=navigation><a id="'+(f*set.show)+'_'+replace+'" class=tipue_search_foot_box>'+(f+1)+'</a></li>';}}} else {var p_b=page+set.footerPages-1;if(p_b>pages) {p_b=pages;} for(var f=page-1;f<p {out+='<li class="current" role="navigation">' +(f+1)+'< _b;f++) li {if(f==page)>';} else {out+='<li role=navigation><a id="'+(f*set.show)+'_'+replace+'" class=tipue_search_foot_box>'+(f+1)+'</a></li>';}}} if(page+1!=pages) {out+='<li role=navigation><a id="'+(start+set.show)+'_'+replace+'" accesskey=m class=tipue_search_foot_box>'+tipuesearch_string_7+'</a></li>';} out+='';}} else {out+='<div id=tipue_search_error>'+tipuesearch_string_8+'</div>';}} else {if(show_stop) {out+='<div id=tipue_search_error>'+tipuesearch_string_8+' '+tipuesearch_string_9+'</div>';} else {if(set.minimumLength==1) {out+='<div id=tipue_search_error>'+tipuesearch_string_11+'</div>';} else {out+='<div id=tipue_search_error>'+tipuesearch_string_12+' '+set.minimumLength+' '+tipuesearch_string_13+'</div>';}}} $('#tipue_search_content').hide().html(out).slideDown(200);$('#tipue_search_replaced').click(function() {getTipueSearch(0,false);});$('.tipue_search_related_btn').click(function() {$('#tipue_search_input').val($(this).attr('id'));getTipueSearch(0,true);});$('.tipue_search_image_zoom').click(function() {$('#tipue_search_image_modal').fadeIn(300);$('#tipue_search_zoom_img').attr('src',this.src);var z_u=$(this).attr('data-url');$('#tipue_search_zoom_url').attr('href',z_u);var z_o=this.alt+'<div class=tipue_search_zoom_options><a href="'+this.src+'" target=_blank>'+tipuesearch_string_15+'</a>  <a href="'+z_u+'">'+tipuesearch_string_16+'</a></div>';$('#tipue_search_zoom_text').html(z_o);});$('.tipue_search_image_close').click(function() {$('#tipue_search_image_modal').fadeOut(300);});$('.tipue_search_foot_box').click(function() {var id_v=$(this).attr('id');var id_a=id_v.split('_');getTipueSearch(parseInt(id_a[0]),id_a[1]);});}});};})(jQuery);